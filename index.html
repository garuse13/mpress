<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>mpress</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>ğŸ° mpress ë„ë°• ì²œêµ­</h1>
    <div class="balance">í˜„ì¬ ì”ì•¡: â‚©<span id="balance">0</span></div>
    <a href="plinko.html" class="btn">í”Œë§ì½”</a>
    <a href="crash.html" class="btn">í¬ë˜ì‹œ</a>
    <a href="dice.html" class="btn">ì£¼ì‚¬ìœ„</a>
    <button onclick="addBalance()" class="btn">ğŸ’° ì”ì•¡ ì¶©ì „</button>
    
<button id="earnBtn" onclick="earnMoney()" class="btn">ğŸ‘† ìˆ˜ë™ ëˆë²Œê¸°</button>

    <button onclick="logout()" class="btn logout">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
  </div>
  <script>
    const currentUser = localStorage.getItem("currentUser");
    if (!currentUser) location.href = "login.html";

    const allUsers = JSON.parse(localStorage.getItem("users") || "{}");
    const userData = allUsers[currentUser];
    if (userData) {
      document.getElementById("balance").innerText = userData.balance;
      localStorage.setItem("balance", userData.balance);
    }

    function logout() {
      localStorage.removeItem("currentUser");
      location.href = "login.html";
    }

    function addBalance() {
      let add = prompt("ì¶©ì „í•  ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”", "1000");
      if (add && !isNaN(add)) {
        userData.balance += parseInt(add);
        localStorage.setItem("balance", userData.balance);
        document.getElementById("balance").innerText = userData.balance;
        allUsers[currentUser] = userData;
        localStorage.setItem("users", JSON.stringify(allUsers));
      }
    }
  
let canEarn = true;
function earnMoney() {
  if (!canEarn) return alert("ì ì‹œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!");

  canEarn = false;
  setTimeout(() => canEarn = true, 500);

  const add = Math.random() < 0.5 ? 5 : 10;
  const currentUser = localStorage.getItem("currentUser");
  const users = JSON.parse(localStorage.getItem("users") || "{}");
  const user = users[currentUser];

  if (user) {
    user.balance += add;
    users[currentUser] = user;
    localStorage.setItem("users", JSON.stringify(users));
    localStorage.setItem("balance", user.balance);
    document.getElementById("balance").innerText = user.balance;
  }
}

  </script>
</body>
</html>
